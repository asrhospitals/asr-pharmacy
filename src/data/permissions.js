export const permissions = {
  user: {
    user_management: "VCED",
    dashboard: "VCED",
    prescription_entry: "VCED",
    view_prescription: "V",
    dispensing: "VCED",
    inventory: "VCED",
    purchase_orders: "VCED",
    purchase_masters: "VCED",
    supplier_management: "VCED",
    gst_billing: "VCED",
    return_expiry: "VCED",
    scheme_billing: "VCED",
    financial_reports: "VCED",
    audit_logs: "VCED",
    backup: "VCED",
    settings: "VCED",
    reports: "VCED",
    rate_master: "VCED",
    other: "VCED",
    accounting_groups: "VCED",
    accounting_ledgers: "VCED",
    accounting_transactions: "VCED",
    accounting_reports: "VCED",
    opening_balance: "VCED",
  },
  pharmacist: {
    dashboard: "V",
    prescription_entry: "C",
    view_prescription: "V",
    dispensing: "VCED",
    inventory: "V",
    gst_billing: "V",
    scheme_billing: "V",
    purchase_masters: "V",
    other: "V",
    accounting_groups: "V",
    accounting_ledgers: "V",
    accounting_transactions: "V",
    accounting_reports: "V",
    opening_balance: "V",
  },
  assistant: {
    view_prescription: "V",
    dispensing: "VC",
    gst_billing: "VC",
    purchase_masters: "V",
    other: "V",
    accounting_groups: "V",
    accounting_ledgers: "V",
    accounting_transactions: "V",
    opening_balance: "V",
  },
  store_manager: {
    dashboard: "V",
    inventory: "VCED",
    purchase_orders: "VCED",
    purchase_masters: "VCED",
    supplier_management: "VCED",
    return_expiry: "VCED",
    scheme_billing: "V",
    financial_reports: "V",
    other: "V",
    accounting_groups: "V",
    accounting_ledgers: "V",
    accounting_transactions: "V",
    accounting_reports: "V",
    opening_balance: "V",
  },
  accounts_officer: {
    dashboard: "V",
    gst_billing: "VCED",
    scheme_billing: "VCED",
    purchase_masters: "VCED",
    financial_reports: "VCED",
    audit_logs: "V",
    other: "V",
    accounting_groups: "VCED",
    accounting_ledgers: "VCED",
    accounting_transactions: "VCED",
    accounting_reports: "VCED",
    opening_balance: "VCED",
  },
  accountant: {
    dashboard: "V",
    gst_billing: "VCED",
    scheme_billing: "VCED",
    purchase_masters: "VCED",
    financial_reports: "VCED",
    other: "V",
    accounting_groups: "VCED",
    accounting_ledgers: "VCED",
    accounting_transactions: "VCED",
    accounting_reports: "VCED",
    opening_balance: "VCED",
  },
  doctor: {
    prescription_entry: "C",
    view_prescription: "V",
  },
  auditor: {
    dashboard: "V",
    view_prescription: "V",
    dispensing: "V",
    inventory: "V",
    purchase_orders: "V",
    purchase_masters: "V",
    gst_billing: "V",
    scheme_billing: "V",
    financial_reports: "V",
    audit_logs: "V",
    other: "V",
    accounting_groups: "V",
    accounting_ledgers: "V",
    accounting_transactions: "V",
    accounting_reports: "V",
    opening_balance: "V",
  },
  scheme_desk: {
    dashboard: "V",
    view_prescription: "V",
    dispensing: "V",
    inventory: "V",
    scheme_billing: "VCED",
    purchase_masters: "V",
    financial_reports: "V",
    other: "V",
    accounting_groups: "V",
    accounting_ledgers: "V",
    accounting_transactions: "V",
    accounting_reports: "V",
    opening_balance: "V",
  },
  viewer: {
    dashboard: "V",
    purchase_masters: "V",
    other: "V",
    accounting_groups: "V",
    accounting_ledgers: "V",
    accounting_transactions: "V",
    accounting_reports: "V",
    opening_balance: "V",
  },
};

export const groupPermissions = {
  defaultGroupPermissions: {
    Asset: {
      canCreateLedger: true,
      canEditLedger: true,
      canDeleteLedger: false,
      canViewLedger: true,
      canCreateTransaction: true,
      canEditTransaction: true,
      canDeleteTransaction: false,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: false,
      canSetOpeningBalance: true,
      canCreateSubGroup: true,
      canEditGroup: true,
      canDeleteGroup: false
    },
    Liability: {
      canCreateLedger: true,
      canEditLedger: true,
      canDeleteLedger: false,
      canViewLedger: true,
      canCreateTransaction: true,
      canEditTransaction: true,
      canDeleteTransaction: false,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: false,
      canSetOpeningBalance: true,
      canCreateSubGroup: true,
      canEditGroup: true,
      canDeleteGroup: false
    },
    Income: {
      canCreateLedger: true,
      canEditLedger: true,
      canDeleteLedger: true,
      canViewLedger: true,
      canCreateTransaction: true,
      canEditTransaction: true,
      canDeleteTransaction: true,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: true,
      canSetOpeningBalance: true,
      canCreateSubGroup: true,
      canEditGroup: true,
      canDeleteGroup: true
    },
    Expense: {
      canCreateLedger: true,
      canEditLedger: true,
      canDeleteLedger: true,
      canViewLedger: true,
      canCreateTransaction: true,
      canEditTransaction: true,
      canDeleteTransaction: true,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: true,
      canSetOpeningBalance: true,
      canCreateSubGroup: true,
      canEditGroup: true,
      canDeleteGroup: true
    },
    Capital: {
      canCreateLedger: false,
      canEditLedger: false,
      canDeleteLedger: false,
      canViewLedger: true,
      canCreateTransaction: false,
      canEditTransaction: false,
      canDeleteTransaction: false,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: false,
      canSetOpeningBalance: false,
      canCreateSubGroup: false,
      canEditGroup: false,
      canDeleteGroup: false
    }
  },

  defaultGroups: {
    'Branch / Divisions': {
      canCreateLedger: true,
      canEditLedger: true,
      canDeleteLedger: false,
      canViewLedger: true,
      canCreateTransaction: true,
      canEditTransaction: true,
      canDeleteTransaction: false,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: false,
      canSetOpeningBalance: true,
      canCreateSubGroup: true,
      canEditGroup: false,
      canDeleteGroup: false
    },
    'Capital Account': {
      canCreateLedger: false,
      canEditLedger: false,
      canDeleteLedger: false,
      canViewLedger: true,
      canCreateTransaction: false,
      canEditTransaction: false,
      canDeleteTransaction: false,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: false,
      canSetOpeningBalance: false,
      canCreateSubGroup: true,
      canEditGroup: false,
      canDeleteGroup: false
    },
    'Current Assets': {
      canCreateLedger: true,
      canEditLedger: true,
      canDeleteLedger: false,
      canViewLedger: true,
      canCreateTransaction: true,
      canEditTransaction: true,
      canDeleteTransaction: false,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: false,
      canSetOpeningBalance: true,
      canCreateSubGroup: true,
      canEditGroup: false,
      canDeleteGroup: false
    },
    'Current Liabilities': {
      canCreateLedger: true,
      canEditLedger: true,
      canDeleteLedger: false,
      canViewLedger: true,
      canCreateTransaction: true,
      canEditTransaction: true,
      canDeleteTransaction: false,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: false,
      canSetOpeningBalance: true,
      canCreateSubGroup: true,
      canEditGroup: false,
      canDeleteGroup: false
    },
    'Fixed Assets': {
      canCreateLedger: true,
      canEditLedger: true,
      canDeleteLedger: false,
      canViewLedger: true,
      canCreateTransaction: true,
      canEditTransaction: true,
      canDeleteTransaction: false,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: false,
      canSetOpeningBalance: true,
      canCreateSubGroup: true,
      canEditGroup: false,
      canDeleteGroup: false
    },
    'Investments': {
      canCreateLedger: true,
      canEditLedger: true,
      canDeleteLedger: false,
      canViewLedger: true,
      canCreateTransaction: true,
      canEditTransaction: true,
      canDeleteTransaction: false,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: false,
      canSetOpeningBalance: true,
      canCreateSubGroup: true,
      canEditGroup: false,
      canDeleteGroup: false
    },
    'Loans (Liability)': {
      canCreateLedger: true,
      canEditLedger: true,
      canDeleteLedger: false,
      canViewLedger: true,
      canCreateTransaction: true,
      canEditTransaction: true,
      canDeleteTransaction: false,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: false,
      canSetOpeningBalance: true,
      canCreateSubGroup: true,
      canEditGroup: false,
      canDeleteGroup: false
    },
    'Misc.Expenses(ASSET)': {
      canCreateLedger: true,
      canEditLedger: true,
      canDeleteLedger: true,
      canViewLedger: true,
      canCreateTransaction: true,
      canEditTransaction: true,
      canDeleteTransaction: true,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: true,
      canSetOpeningBalance: true,
      canCreateSubGroup: true,
      canEditGroup: false,
      canDeleteGroup: false
    },
    'Profit & Loss': {
      canCreateLedger: true,
      canEditLedger: true,
      canDeleteLedger: true,
      canViewLedger: true,
      canCreateTransaction: true,
      canEditTransaction: true,
      canDeleteTransaction: true,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: true,
      canSetOpeningBalance: true,
      canCreateSubGroup: true,
      canEditGroup: false,
      canDeleteGroup: false
    },
    'Revenue Account': {
      canCreateLedger: true,
      canEditLedger: true,
      canDeleteLedger: true,
      canViewLedger: true,
      canCreateTransaction: true,
      canEditTransaction: true,
      canDeleteTransaction: true,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: true,
      canSetOpeningBalance: true,
      canCreateSubGroup: true,
      canEditGroup: false,
      canDeleteGroup: false
    },
    'Suspense Accounts': {
      canCreateLedger: true,
      canEditLedger: true,
      canDeleteLedger: false,
      canViewLedger: true,
      canCreateTransaction: true,
      canEditTransaction: true,
      canDeleteTransaction: false,
      canViewTransaction: true,
      canViewReport: true,
      canExportReport: true,
      canViewBalance: true,
      canModifyBalance: false,
      canSetOpeningBalance: true,
      canCreateSubGroup: true,
      canEditGroup: false,
      canDeleteGroup: false
    }
  }
};

export function hasPermission(role, module, action) {
  if (!role || !permissions[role]) return false;
  const allowed = permissions[role][module];
  if (!allowed) return false;
  return allowed.includes(action);
}

export function hasGroupPermission(groupName, groupType, action) {
  if (groupPermissions.defaultGroups[groupName]) {
    return groupPermissions.defaultGroups[groupName][action] || false;
  }
  
  if (groupPermissions.defaultGroupPermissions[groupType]) {
    return groupPermissions.defaultGroupPermissions[groupType][action] || false;
  }
  
  return false;
}

export function getGroupPermissions(groupName, groupType) {
  if (groupPermissions.defaultGroups[groupName]) {
    return groupPermissions.defaultGroups[groupName];
  }
  
  if (groupPermissions.defaultGroupPermissions[groupType]) {
    return groupPermissions.defaultGroupPermissions[groupType];
  }
  
  return {};
} 